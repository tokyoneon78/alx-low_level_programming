Dealing with Nested Loops and functions
